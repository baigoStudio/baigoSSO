!function(e){e.fn.baigoValidate=function(t){"use strict";if(this.length<1)return this;var a=e(this),r={},s={},n=0,o="",i={">":"gt",">=":"egt","<":"lt","<=":"elt","=":"eq",same:"eq","!=":"neq","<>":"neq"},c=e.extend(!0,{timeout:3e4,delimiter:" - ",result_obj:{error_msg:"error_msg",msg:"msg"},type_msg:{require:"{:attr} require",confirm:"{:attr} out of accord with {:confirm}",different:"{:attr} cannot be same with {:different}",accepted:"{:attr} must be yes, on or 1",in:"{:attr} must be in {:rule}",not_in:"{:attr} be notin {:rule}",between:"{:attr} must between {:rule}",not_between:"{:attr} cannot between {:rule}",length:"Size of {:attr} must be {:rule}",min:"Min size of {:attr} must be {:rule}",max:"Max size of {:attr} must be {:rule}",after:"{:attr} cannot be less than {:rule}",before:"{:attr} cannot exceed {:rule}",expire:"{:attr} not within {:rule}",egt:"{:attr} must greater than or equal {:rule}",gt:"{:attr} must greater than {:rule}",elt:"{:attr} must less than or equal {:rule}",lt:"{:attr} must less than {:rule}",eq:"{:attr} must equal {:rule}",neq:"{:attr} cannot be same with {:rule}",regex:"{:attr} not conform to the rules",format:"{:attr} not conform format of {:rule}",date_format:"{:attr} must be date format of {:rule}",time_format:"{:attr} must be time format of {:rule}",date_time_format:"{:attr} must be datetime format of {:rule}",checkbox:"Count of {:attr} must be {:rule}",radio:"Count of {:attr} must be {:rule}",select:"Count of {:attr} must be {:rule}",ajax:""},format_msg:{number:"{:attr} must be numeric",int:"{:attr} must be integer",float:"{:attr} must be float",bool:"{:attr} must be bool",email:"{:attr} not a valid email address",date:"{:attr} not a valid date",time:"{:attr} not a valid time",date_time:"{:attr} not a valid datetime",alpha:"{:attr} must be alpha",alpha_number:"{:attr} must be alpha-numeric",alpha_dash:"{:attr} must be alpha-numeric, dash, underscore",chs:"{:attr} must be chinese",chs_alpha:"{:attr} must be chinese or alpha",chs_alpha_number:"{:attr} must be chinese, alpha-numeric",chs_dash:"{:attr} must be chinese, alpha-numeric, underscore, dash",url:"{:attr} not a valid url",ip:"{:attr} not a valid ip",ip_v4:"{:attr} not a valid ip",ip_v6:"{:attr} not a valid ip"},field_selector:{prefix_msg:"#msg_",prefix_group:"#group_"},class_name:{input:{success:"is-valid",err:"is-invalid"},msg:{success:"valid-feedback",err:"invalid-feedback",loading:"text-info"},group:{success:"text-success",err:"text-danger"},attach:{success:"text-success",err:"text-danger"}},msg:{loading:"Loading",ajax_err:"Error"},box:{msg:"Input error",selector:{box:".bg-validate-box",msg:".bg-msg"},tpl:'<div class="alert alert-danger alert-dismissible"><span class="bg-msg"></span><button type="button" class="close" data-dismiss="alert">&times;</button></div>',delay:5e3},extra:{class_name:"bg-validate-extra",delay:15e3},extra_boxes:{},selector_types:{},rules:{},attr_names:{},scene:{},only:{},remove:{},append:{}},t),u=c.box.selector;e(u.box).length<1&&a.append('<div class="bg-validate-box"></div>');var l={formatDate:function(e,t){var a=new Date;a.setTime(t);var r={"M+":a.getMonth()+1,"d+":a.getDate(),"H+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};for(var s in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+s+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?r[s]:("00"+r[s]).substr((""+r[s]).length)));return e},parseRule:function(t){var a={};return e.each(t,function(e,t){if(void 0!==i[e]&&(e=i[e]),void 0!==c.type_msg[e])switch(e){case"require":!0!==t&&"true"!==t||(a[e]={type:e,rule:t});break;case"length":case"between":case"not_between":case"expire":t.indexOf(",")>0&&(a[e]={type:e,rule:t});break;case"min":case"max":case"in":case"not_in":case"egt":case"gt":case"elt":case"lt":case"eq":case"neq":case"before":case"after":case"regex":null!=t&&(a[e]={type:e,rule:t});break;case"date_format":case"time_format":case"date_time_format":var r=l.getDateRule(e);null!=t&&(r=t),a[e]={type:e,rule:r};break;case"format":void 0!==c.format_msg[t]&&(a[e]={type:e,rule:t});break;case"ajax":void 0!==t.url&&(a[e]={type:e,rule:t});break;default:var s;s="string"==typeof t?t:null,a[e]={type:e,rule:s}}}),a},getDateRule:function(e){var t="";switch(e){case"date_format":t="yyyy-MM-dd";break;case"time_format":t="H:i:s";break;case"date_time_format":t="yyyy-MM-dd H:i:s"}return t},check:function(t,a,r){if("object"==typeof a){var o=l.parseRule(a),i=0;e.each(o,function(e,a){void 0!==a.type&&void 0!==a.rule&&(l.checkItem(t,a,r)||(n++,i++))})}if(i>0){if(void 0!==s[r])var c=s[r];l.output(r,c,"err")}else l.output(r,"","success")},checkItem:function(e,t,a){var r,n=!1;switch(t.type){case"require":n=d.min(e,1);break;case"length":n=d.leng(e,t.rule);break;case"between":case"not_between":case"expire":case"in":case"not_in":case"egt":case"gt":case"elt":case"lt":case"eq":case"neq":case"before":case"after":case"regex":case"min":case"max":n=d[l.toHump(t.type)](e,t.rule);break;case"bool":var o=[!0,"true",0,1,"0","1"];n=l.inArray(e,o);break;case"accepted":o=["1","on","yes"];n=l.inArray(e,o);break;case"date_format":case"time_format":case"date_time_format":n=d.dateFormat(e,t.rule);break;case"confirm":"string"==typeof t.rule?t.rule=t.rule:t.rule=a.replace("_confirm",""),n=d.confirm(e,t.rule);break;case"different":"string"==typeof t.rule?t.rule=t.rule:t.rule=a.replace("_different",""),n=d.confirm(e,t.rule,!0);break;case"ajax":d.ajaxCheck(e,a,t.rule),n=!0;break;case"checkbox":case"radio":n=d.checkForm(a,t.rule);break;case"select":n=d.selectForm(a,t.rule);break;case"format":switch(t.rule){case"date":case"time":case"date_time":var i=e.replace(/-/g,"/");isNaN(Date.parse(i))||(n=!0);break;case"alpha":r=/^[A-Za-z]+$/,n=d.regex(e,r);break;case"alpha_number":r=/^[A-Za-z0-9]+$/,n=d.regex(e,r);break;case"alpha_dash":r=/^[A-Za-z0-9_\-]+$/,n=d.regex(e,r);break;case"chs":r=/^[\u4e00-\u9fa5]+$/,n=d.regex(e,r);break;case"chs_alpha":r=/^[\u4e00-\u9fa5A-Za-z]+$/,n=d.regex(e,r);break;case"chs_alpha_number":r=/^[\u4e00-\u9fa5A-Za-z0-9]+$/,n=d.regex(e,r);break;case"chs_dash":r=/^[\u4e00-\u9fa5A-Za-z0-9\_\-]+$/,n=d.regex(e,r);break;case"number":n=l.isNumber(e);break;case"int":r=/^[\+\-]?[0-9]+$/,n=d.regex(e,r);break;case"float":r=/^[\+\-]?[0-9]+\.[0-9]+$/,n=d.regex(e,r);break;case"email":r=/^([A-Za-z0-9][\.\_\-]?)+\@([A-Za-z0-9][\.\-]?)+[A-Za-z]{2,4}$/,n=d.regex(e,r);break;case"ip":case"ip_v4":r=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,n=d.regex(e,r);break;case"ip_v6":r=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,n=d.regex(e,r);break;case"url":r=/^((https?|ftp|file):)?\/\/[\-A-Za-z0-9+&@#\/%?\=~\_|!:,\.;]+[\-A-Za-z0-9+&@#\/%\=~\_|]$/,n=d.regex(e,r)}}if(!n){var u="unknown",m=a,f=a,g=a;switch("format"==t.type?void 0!==c.format_msg[t.rule]&&(u=c.format_msg[t.rule]):void 0!==c.type_msg[t.type]&&(u=c.type_msg[t.type]),void 0!==c.attr_names[a]&&(m=c.attr_names[a]),void 0!==c.attr_names[t.rule]&&(f=c.attr_names[t.rule],g=c.attr_names[t.rule]),t.type){case"length":case"between":case"not_between":t.rule=t.rule.replace(",",c.delimiter)}u=(u=(u=(u=u.replace("{:attr}",m)).replace("{:rule}",t.rule)).replace("{:confirm}",f)).replace("{:different}",g),s[a]=u}return n},getLeng:function(e){var t=0;if(void 0!==e)for(var a=0;a<e.length;a++){var r=e.charCodeAt(a);r<127?t++:t+=r<=2047?2:r<=65535?3:4}return t},isNumber:function(e){return e.length<1||"number"==typeof(e=Number(e))&&!isNaN(e)},inArray:function(e,t){return e.length<1||t.rule.indexOf(e)>=0},output:function(t,a,r){var s=l.getSelector(t);if(e(c.field_selector.prefix_msg+t).text(a),e(s).removeClass(c.class_name.input.success+" "+c.class_name.input.err),e(c.field_selector.prefix_msg+t).removeClass(c.class_name.msg.success+" "+c.class_name.msg.err+" "+c.class_name.msg.loading),e(c.field_selector.prefix_group+t).removeClass(c.class_name.group.success+" "+c.class_name.group.err),e(c.field_selector.prefix_group+t).removeClass(c.class_name.attach.success+" "+c.class_name.attach.err),void 0!==c.class_name.input[r]&&e(s+":not(select,:radio:not(:checked),:checkbox:not(:checked))").addClass(c.class_name.input[r]),void 0!==c.class_name.msg[r]&&e(c.field_selector.prefix_msg+t).addClass(c.class_name.msg[r]),e(c.field_selector.prefix_msg+t).show(),c.class_name.group[r],e(c.field_selector.prefix_group+t).addClass(c.class_name.group[r]),void 0!==c.extra_boxes[t]){var n=c.extra_boxes[t];"object"==typeof n?void 0!==n.selector&&l.extraOutput(r,n.selector,n.msg):"string"==typeof n&&l.extraOutput(r,n)}},boxOutput:function(){n>0?(e(u.box).html(c.box.tpl),void 0!==c.box.msg&&c.box.msg.length>0&&e(u.box+" "+u.msg).text(c.box.msg),e(u.box).slideDown(function(){setTimeout(function(){e(u.box).slideUp()},c.box.delay)})):e(u.box).slideUp()},extraOutput:function(t,a,r){console.log(r);var s=e(a);s.length>0&&("err"==t?(s.addClass(c.extra.class_name),void 0!==r&&r.length>0&&s.text(r),s.show()):n<1&&s.hide())},getSelector:function(e){var t="";switch(void 0===c.selector_types[e]?"id":c.selector_types[e]){case"validate":t="[data-validate="+e+"]";break;case"name":t="[name="+e+"]";break;case"class":t="."+e;break;default:t="#"+e}return t},getRule:function(){var t={};if(o.length>0&&"object"==typeof c.scene[o]&&c.scene[o].length>0?e.each(c.scene[o],function(e,a){l.isNumber(e)?void 0!==c.rules[a]&&(t[a]=c.rules[a]):void 0!==c.rules[e]?t[e]=c.rules[e]:"object"==typeof a&&(t[e]=a)}):t=c.rules,c.only.length>0){var a={};e.each(c.only,function(e,r){void 0!==t[r]&&(a[r]=t[r])}),a.length>0&&(t=a)}else c.remove.length>0?e.each(c.remove,function(e,a){void 0!==t[a]&&delete t[a]}):c.append.length>0&&e.each(c.append,function(e,a){void 0!==t[e]&&(t[e]=a)});return t},getData:function(){r={},n=0;var t={},s=a.serializeArray();e.each(s,function(e,a){t[a.name]=a.value}),e.each(c.rules,function(a,s){if(void 0!==t[a])r[a]=t[a];else{var n=l.getSelector(a);r[a]=e(n).val()}})},toHump:function(e){return e.replace(/\_(\w)/g,function(e,t){return t.toUpperCase()})},toLine:function(e){return e.replace(/([A-Z])/g,"_$1").toLowerCase()}},d={verify:function(t){l.getData();var a=!0,s=l.getRule();return void 0===t?(e.each(s,function(e,t){void 0!==t&&(void 0===r[e]&&(r[e]=""),l.check(r[e],t,e))}),n>0&&(a=!1),l.boxOutput()):void 0!==s[t]&&l.check(r[t],s[t],t),a},setRules:function(e){c.rules=e},leng:function(e,t){var a=!0,r=[];t.indexOf(",")>0?r=t.split(","):(r[0]=t,r[1]=0);var s=r[0],n=r[1];return s>0&&l.getLeng(e)<s?a=!1:n>0&&l.getLeng(e)>n&&(a=!1),a},checkForm:function(t,a){var r=l.getSelector(t),s=!0,n=[];a.indexOf(",")>0?n=a.split(","):(n[0]=a,n[1]=0);var o=n[0],i=n[1];return o>0&&e(r+":checked").length<o?s=!1:i>0&&e(r+":checked").length>i&&(s=!1),s},selectForm:function(t,a){var r=l.getSelector(str_key),s=!0,n=[];a.indexOf(",")>0?n=a.split(","):(n[0]=a,n[1]=0);var o=n[0],i=n[1];return o>0&&e(r+" option:selected").length<o?s=!1:i>0&&e(r+" option:selected").length>i&&(s=!1),s},min:function(e,t){var a=!0;return t>0&&l.getLeng(e)<t&&(a=!1),a},max:function(e,t){var a=!0;return t>0&&l.getLeng(e)>t&&(a=!1),a},dateFormat:function(e,t){if(e.length<1)return!0;e.replace(/-/g,"/");var a=Date.parse(e);return l.formatDate(a)==e},regex:function(e,t){if(e.length<1)return!0;var a;"object"==typeof t?a=t:(t.indexOf("^")<0&&(t="^"+t),t.indexOf("$")<0&&(t+="$"),a=new RegExp(t));Object.keys(a);return a.test(e)},expire:function(e,t){if(e.length<1)return!0;var a=t.split(","),r=(new Date).getTime(),s=a[0],n=a[1];return l.isNumber(s)&&(s=Date.parse(s)),l.isNumber(n)&&(n=Date.parse(n)),r>=s&&r<=n},after:function(e,t){return e.length<1||(l.isNumber(e)&&(e=Date.parse(e)),l.isNumber(t)&&(t=Date.parse(t)),e>=t)},before:function(e,t){return e.length<1||(l.isNumber(e)&&(e=Date.parse(e)),l.isNumber(t)&&(t=Date.parse(t)),e<=t)},in:function(e,t){if(e.length<1)return!0;var a=[];return t.indexOf(",")>0?a=t.split(","):a[0]=t,l.inArray(e,a)},notIn:function(e,t){if(e.length<1)return!0;var a=[];return t.indexOf(",")>0?a=t.split(","):a[0]=t,!l.inArray(e,a)},between:function(e,t){if(e.length<1)return!0;var a=t.split(","),r=Number(a[0]),s=Number(a[1]);return(e=Number(e))>=r&&e<=s},notBetween:function(e,t){if(e.length<1)return!0;var a=t.split(","),r=Number(a[0]),s=Number(a[1]);return(e=Number(e))<r||e>s},egt:function(e,t){return e.length<1||(e=Number(e))>=(t=Number(t))},gt:function(e,t){return e.length<1||(e=Number(e))>(t=Number(t))},elt:function(e,t){return e.length<1||(e=Number(e))<=(t=Number(t))},lt:function(e,t){return e.length<1||(e=Number(e))<(t=Number(t))},eq:function(e,t){return e.length<1||e==t},neq:function(e,t){return e.length<1||e!=t},scene:function(e){o=e},getMessage:function(){return s},confirm:function(e,t,a){return void 0!==a&&!0===a?r[t]!=e:r[t]==e},ajaxCheck:function(t,a,r){if(!(t.length<1||n>0)){var s=(void 0!==r.key?r.key:a)+"="+t;void 0!==r.attach&&void 0!==r.attach.selectors&&void 0!==r.attach.keys&&e.each(r.attach.selectors,function(t,a){void 0!==r.attach.keys[t]&&(s+="&"+r.attach.keys[t]+"="+e(a).val())}),s+="&"+(new Date).getTime()+"at"+Math.random(),e.ajax({url:r.url,dataType:"json",data:s,timeout:c.timeout,beforeSend:function(){l.output(a,c.msg.loading,"loading")},error:function(e){l.output(a,c.msg.ajax_err+"! "+e.status+" "+e.statusText,"err")},success:function(e){void 0!==e[c.result_obj.error_msg]?l.output(a,e[c.result_obj.error_msg],"err"):void 0!==e[c.result_obj.msg]&&l.output(a,e[c.result_obj.msg],"success")}})}}};return a.find("*").change(function(){var t="",a=e(this).prop("tagName");a=void 0!==a?a.toLowerCase():"input";var r=e(this).data("validate"),s=e(this).attr("id"),n=e(this).attr("name"),o=e(this).attr("class");switch(a){case"select":case"textarea":void 0!==r&&r.length>0?t=r:void 0!==s&&s.length>0?t=s:void 0!==n&&n.length>0&&(t=n);break;default:var i=e(this).attr("type");switch(void 0===i&&(i="text"),i=i.toLowerCase()){case"checkbox":case"radio":void 0!==r&&r.length>0?t=r:void 0!==n&&n.length>0?t=n:void 0!==o&&o.length>0&&(t=o);break;default:void 0!==r&&r.length>0?t=r:void 0!==s&&s.length>0?t=s:void 0!==n&&n.length>0&&(t=n)}}d.verify(t)}),d}}(jQuery);