jQuery.baigoDialog=function(t){"use strict";if(this.length<1)return this;var e=$.extend(!0,{selector:{modal:".bg-confirm-modal",msg:".bg-msg",cancel:".bg-cancel",confirm:".bg-confirm",ok:".bg-ok",footer:".bg-footer",group_confirm:".bg-group-confirm",group_input:".bg-group-input",input_label:".bg-input-label",input_control:".bg-input-control"},btn_text:{cancel:"Cancel",confirm:"Confirm",ok:"OK"},tpl:'<div class="modal bg-confirm-modal"><div class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-body"><div class="bg-msg"></div></div><div class="modal-footer bg-footer"></div></div></div></div>',btn_tpl:{alert:'<button type="button" class="btn btn-primary btn-sm bg-ok" data-dismiss="modal">OK</button>',confirm:'<button type="button" class="btn btn-outline-secondary btn-sm bg-cancel bg-group-confirm" data-act="cancel">Cancel</button> <button type="button" class="btn btn-primary btn-sm bg-confirm bg-group-confirm" data-act="confirm">Confirm</button>',input:'<button type="button" class="btn btn-outline-secondary btn-sm bg-cancel bg-group-input" data-act="cancel">Cancel</button> <button type="button" class="btn btn-primary btn-sm bg-confirm bg-group-input" data-act="ok">OK</button>'},input_tpl:{text:'<div class="form-group" id="{:id}"><label class="bg-input-label">{:label}</label><input type="text" class="form-control bg-input-control" id="{:id_input}"></div>',textarea:'<div class="form-group" id="{:id}"><label class="bg-input-label">{:label}</label><textarea class="form-control bg-input-control" id="{:id_input}"></textarea></div>',select:'<div class="form-group" id="{:id}"><label class="bg-input-label">{:label}</label><select class="form-control bg-input-control" id="{:id_input}">{:items}</select></div>',select_input:'<div class="form-group" id="{:id}"><label class="bg-input-label">{:label}</label><div class="input-group"><input type="text" class="form-control bg-input-control" id="{:id_input}"><span class="input-group-append"><button class="btn btn-outline-secondary dropdown-toggle" type="button" data-toggle="dropdown">Please select</button><div class="dropdown-menu">{:items}</div></span></div></div>',radio:'<div class="form-group" id="{:id}"><label class="bg-input-label">{:label}</label><div class="bg-input-box">{:items}</div></div>',switch:'<div class="custom-control custom-switch" id="{:id}"><input type="checkbox" value="1" class="custom-control-input" id="{:id_input}"><label for="{:id_input}" class="custom-control-label">{:label}</label></div>'},item_tpl:{select:'<option {:selected} value="{:value}">{:label}</option>',select_input:'<button class="dropdown-item bg-select-input" data-value="{:value}" data-target="{:target}" type="button">{:label}</button>',radio:'<div class="form-check{:form-check-inline}"><input type="radio" value="{:value}" name="{:name}" id="{:id}" {:checked} class="form-check-input"><label for="{:id}" class="form-check-label">{:label}</label>{:note}</div>'}},t),l=e.selector.modal;$(l).length<1&&$("body").append(e.tpl),$(l).on("click",".bg-select-input",function(){var t=$(this).data("value"),e=$(this).data("target");$(e).val(t)});var o={modalShow:function(t){if("string"==typeof t&&t.length>0){$(l+" "+e.selector.msg).text(t);$(l).modal({backdrop:"static",show:!0})}},inputShow:function(t){var i=o.len(t);if(void 0!==t&&i>0){var n="";if("object"==typeof t?$.each(t,function(t,e){if("object"==typeof e){if(void 0===e.id&&(e.id=t),void 0===e.type&&(e.type="text"),void 0===e.label&&(e.label=e.id),n+=o.inputTpl(e.type,e.id,e.label),"object"==typeof e.items){var l=o.itemTpl(e.id,e.type,e.items);n=o.replaceAll(n,"{:items}",l)}}else"string"==typeof e&&(n+=o.inputTpl("text",e,e))}):"string"==typeof t&&(n=o.inputTpl("text",t,t)),n.length>0){$(l+" "+e.selector.msg).html(n),$(l).modal({backdrop:"static",show:!0})}}},modalHide:function(){$(l).modal("hide")},inputTpl:function(t,l,i){var n="";return n=void 0===e.input_tpl[t]?e.input_tpl.text:e.input_tpl[t],n=o.replaceAll(n,"{:id}",l),n=o.replaceAll(n,"{:label}",i),n=o.replaceAll(n,"{:id_input}",l+"_input")},itemTpl:function(t,l,i){var n="",c="",a={};return $.each(i,function(i,r){void 0!==e.item_tpl[l]&&(c=e.item_tpl[l],a.id=t+"_"+i,a.value=i,a.text=i,a.selected="",a.checked="","object"==typeof r?("string"==typeof r.value&&(a.value=r.value),"string"==typeof r.text&&(a.text=r.text),"string"==typeof r.note&&(a.note=r.note),void 0!==r.selected&&1==r.selected&&(a.selected="selected"),void 0!==r.checked&&1==r.checked&&(a.checked="checked")):"string"==typeof r&&(a.value=r,a.text=r),c=o.replaceAll(c,"{:id}",a.id),c=o.replaceAll(c,"{:name}",t+"_input"),c=o.replaceAll(c,"{:target}","#"+t+"_input"),c=o.replaceAll(c,"{:value}",a.value),c=o.replaceAll(c,"{:label}",a.text),c=o.replaceAll(c,"{:selected}",a.selected),c=o.replaceAll(c,"{:checked}",a.checked),"string"==typeof a.note?(c=o.replaceAll(c,"{:form-check-inline}",""),c=o.replaceAll(c,"{:note}",'<small class="form-text">'+a.note+"</small>")):(c=o.replaceAll(c,"{:form-check-inline}"," form-check-inline"),c=o.replaceAll(c,"{:note}","")),n+=c)}),n},replaceAll:function(t,e,l){var o=new RegExp(e,"g");return t.replace(o,l)},len:function(t){var e=0;void 0===t.length?e=Object.keys(t).length:e=t.length;return e}};return{alert:function(t){$(l+" "+e.selector.footer).html(e.btn_tpl.alert),$(l+" "+e.selector.ok).text(e.btn_text.ok),o.modalShow(t),$(l+" "+e.selector.ok).click(function(){o.modalHide()})},confirm:function(t,i){"string"==typeof t&&t.length>0&&($(l+" "+e.selector.footer).html(e.btn_tpl.confirm),$(l+" "+e.selector.cancel).text(e.btn_text.cancel),$(l+" "+e.selector.confirm).text(e.btn_text.confirm),o.modalShow(t),i&&i instanceof Function&&($(l+" "+e.selector.group_confirm).off("click"),$(l+" "+e.selector.group_confirm).click(function(){"confirm"==$(this).data("act")?i(!0):i(!1),o.modalHide()})))},input:function(t,i){void 0!==t&&($(l+" "+e.selector.footer).html(e.btn_tpl.input),$(l+" "+e.selector.cancel).text(e.btn_text.cancel),$(l+" "+e.selector.ok).text(e.btn_text.ok),o.inputShow(t),i&&i instanceof Function&&($(l+" "+e.selector.group_input).off("click"),$(l+" "+e.selector.group_input).click(function(){var n=o.len(t);if("ok"==$(this).data("act")&&n>0){if("object"==typeof t){var c={};$.each(t,function(t,e){if("object"==typeof e)switch(void 0===e.id&&(e.id=t),void 0===e.type&&(e.type="text"),e.type){case"radio":void 0!==e.id&&(c[t]=$(l+" :radio:checked").val());break;case"switch":if(void 0!==e.id){var o=$(l+" :checkbox:checked").val();void 0!==o&&(c[t]=o)}break;default:void 0!==e.id&&(c[t]=$(l+" #"+e.id+"_input").val())}else"string"==typeof e&&(c[t]=$(l+" #"+e+"_input").val())})}else c=$(l+" "+e.selector.input_control).val();i("ok",c)}else i("cancel");o.modalHide()})))}}};