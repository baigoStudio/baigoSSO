!function(s){s.fn.baigoClear=function(e){"use strict";if(this.length<1)return this;var r=s(this);r.submit(function(s){s.preventDefault()});var t=s.extend(!0,{ajax_url:"",timeout:3e4,selector:{content:".bg-clear",progress:".bg-progress",msg:".bg-msg"},msg:{loading:"Loading...",complete:"Complete",err:"Error"},class_msg:{submitting:"alert-info",err:"alert-danger",success:"alert-success"},tpl:'<div class="bg-clear my-3 collapse"><div class="bg-progress progress"><div class="progress-bar progress-bar-info progress-bar-striped active"></div></div><div class="bg-msg mt-3 alert"></div></div>'},e),a=t.selector.content;r.find(a).length<1&&r.append(t.tpl);var o={output:function(s,e){r.find(a).collapse("show"),r.find(t.selector.msg).removeClass(t.class_msg.submitting+" "+t.class_msg.err+" "+t.class_msg.success),r.find(t.selector.msg).addClass(e),r.find(t.selector.msg).text(s)},submitFunc:function(e,a,i){var n,c,g,l=0,u=s(r).serializeArray();void 0===e&&(e=1),void 0===a&&(a=0),void 0===i&&(i=0),u.push({name:"page",value:e},{name:"min_id",value:a},{name:"max_id",value:i}),void 0!==t.ajax_url&&""!=t.ajax_url||(t.ajax_url=r.attr("action")),n=t.ajax_url.indexOf("?")>0?"&":"?",s.ajax({url:t.ajax_url+n+(new Date).getTime()+"at"+Math.random(),type:"post",dataType:"json",data:u,timeout:t.timeout,error:function(s){o.output(s.status+" "+s.statusText,t.class_msg.err)},success:function(s){switch(void 0===s.count&&(s.count=0),l<1&&(l=s.count),(g=parseInt(e/l*100+"%"))>100&&(g=100),s.status){case"err":c=void 0!==s.msg?s.msg:t.msg.err,o.output(c,t.class_msg.err),l=0,e=1;break;case"complete":c=void 0!==s.msg?s.msg:t.msg.complete,o.output(c,t.class_msg.success),r.find(t.selector.progress+" .progress-bar").text("100%"),r.find(t.selector.progress+" .progress-bar").css("width","100%"),setTimeout(function(){r.find(t.selector.progress).slideUp()},3e3),l=0,e=1;break;case"next":c=void 0!==s.msg?s.msg:t.msg.loading,o.output(c,t.class_msg.submitting),g=20,r.find(t.selector.progress+" .progress-bar").text(g+"%"),r.find(t.selector.progress+" .progress-bar").css("min-width","20%"),r.find(t.selector.progress+" .progress-bar").css("width",g+"%"),r.find(t.selector.progress).slideDown(),o.submitFunc(1,0,s.max_id);break;default:c=void 0!==s.msg?s.msg:t.msg.loading,o.output(c,t.class_msg.submitting),r.find(t.selector.progress+" .progress-bar").text(g+"%"),r.find(t.selector.progress+" .progress-bar").css("min-width","20%"),r.find(t.selector.progress+" .progress-bar").css("width",g+"%"),r.find(t.selector.progress).slideDown(),o.submitFunc(e,0,s.max_id)}}}),e++}};return{clearSubmit:function(s){void 0!==s&&(t.ajax_url=s),o.submitFunc()},ajaxUrl:function(s){void 0!==s&&(t.ajax_url=s),t.ajax_url=s}}}}(jQuery);