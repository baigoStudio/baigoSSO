!function(t){t.fn.baigoUbb=function(e){"use strict";if(this.length<1)return this;var a=t(this),o=a[0],n=t.extend(!0,{menu_selector:".bg-ubb-menu",menu_text:{color:"Color",bgcolor:"Background color",heading:"Heading"},format:{strong:{text:"Bold",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M333.49 238a122 122 0 0 0 27-65.21C367.87 96.49 308 32 233.42 32H34a16 16 0 0 0-16 16v48a16 16 0 0 0 16 16h31.87v288H34a16 16 0 0 0-16 16v48a16 16 0 0 0 16 16h209.32c70.8 0 134.14-51.75 141-122.4 4.74-48.45-16.39-92.06-50.83-119.6zM145.66 112h87.76a48 48 0 0 1 0 96h-87.76zm87.76 288h-87.76V288h87.76a56 56 0 0 1 0 112z"/></svg>'},i:{text:"Italic",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M320 48v32a16 16 0 0 1-16 16h-62.76l-80 320H208a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16H16a16 16 0 0 1-16-16v-32a16 16 0 0 1 16-16h62.76l80-320H112a16 16 0 0 1-16-16V48a16 16 0 0 1 16-16h192a16 16 0 0 1 16 16z"/></svg>'},u:{text:"Underline",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M32 64h32v160c0 88.22 71.78 160 160 160s160-71.78 160-160V64h32a16 16 0 0 0 16-16V16a16 16 0 0 0-16-16H272a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h32v160a80 80 0 0 1-160 0V64h32a16 16 0 0 0 16-16V16a16 16 0 0 0-16-16H32a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16zm400 384H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"/></svg>'}},color:{aqua:{text:"Aqua",ext:"#333"},black:"Black",blue:"Blue",fuchsia:"Fuchsia",gray:"Gray",green:"Green",lime:{text:"Lime",ext:"#333"},maroon:"Maroon",navy:"Navy",olive:"Olive",purple:"Purple",red:"Red",silver:"Silver",teal:"Teal",white:{text:"White",ext:"#333"},yellow:{text:"Yellow",ext:"#333"}},bgcolor:{aqua:{text:"Aqua",ext:"#000"},black:"Black",blue:"Blue",fuchsia:"Fuchsia",gray:"Gray",green:"Green",lime:{text:"Lime",ext:"#000"},maroon:"Maroon",navy:"Navy",olive:"Olive",purple:"Purple",red:"Red",silver:"Silver",teal:"Teal",white:{text:"White",ext:"#000"},yellow:{text:"Yellow",ext:"#000"}},heading:{h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6"},dialog:{img:{text:"Image",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"/></svg>',ext:["src","text"]},url:{text:"Link",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg>',ext:["href","text"]}},single:{hr:{text:"Horizontal rule",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"/></svg>'},br:{text:"Break line",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M448 48v32a16 16 0 0 1-16 16h-48v368a16 16 0 0 1-16 16h-32a16 16 0 0 1-16-16V96h-32v368a16 16 0 0 1-16 16h-32a16 16 0 0 1-16-16V352h-32a160 160 0 0 1 0-320h240a16 16 0 0 1 16 16z"/></svg>'}}},e),l='<div class="bg-ubb-menu mb-2"><div class="btn-toolbar"><div class="btn-group btn-group-sm mr-2 bg-ubb-format"></div><div class="btn-group btn-group-sm mr-2"><div class="btn-group btn-group-sm"><button type="button" class="btn btn-outline-secondary dropdown-toggle" data-toggle="dropdown">'+n.menu_text.heading+'</button><div class="dropdown-menu bg-ubb-heading"></div></div><div class="btn-group btn-group-sm"><button type="button" class="btn btn-outline-secondary dropdown-toggle" data-toggle="dropdown">'+n.menu_text.color+'</button><div class="dropdown-menu bg-ubb-color"></div></div><div class="btn-group btn-group-sm"><button type="button" class="btn btn-outline-secondary dropdown-toggle" data-toggle="dropdown">'+n.menu_text.bgcolor+'</button><div class="dropdown-menu bg-ubb-bgcolor"></div></div></div><div class="btn-group btn-group-sm mr-2 bg-ubb-dialog"></div><div class="btn-group btn-group-sm bg-ubb-single"></div></div></div>';t(n.menu_selector).length<1&&a.before(l);var i=function(e,a,o){var l="";t.each(e,function(t,e){var a="",n="",i="";switch("string"==typeof e?a=e:"object"==typeof e&&("string"==typeof e.text&&(a=e.text),n="string"==typeof e.icon?e.icon:a,"string"==typeof e.ext&&(i=e.ext)),l+='<button type="button"',o){case"heading":n="<"+t+">"+a+"</"+t+">",l+=' class="dropdown-item bg-pair" data-tag="'+t+'"';break;case"color":n='<span class="p-1" style="color:'+t+";",i.length>0&&(n+="background-color:"+i+";"),n+='">'+a+"</span>",l+=' class="dropdown-item bg-tag" data-tag="color" data-value="'+t+'"';break;case"bgcolor":i.length<1&&(i="white"),n='<span style="background-color:'+t+";color:"+i+';">'+a+"</span>",l+=' class="dropdown-item bg-tag" data-tag="bgcolor" data-value="'+t+'"';break;case"format":l+=' class="btn btn-outline-secondary bg-pair" data-tag="'+t+'"';break;default:l+=' class="btn btn-outline-secondary bg-'+o+'" data-tag="'+t+'"'}l+=' title="'+a+'">'+n+"</button>"}),t(n.menu_selector+" "+a).html(l)},g={addSingle:function(t){if(void 0!==t&&t.length>0){var e=o.value.length,a=o.selectionStart,n=o.selectionEnd;o.value=o.value.substring(0,a)+"["+t+"]"+o.value.substring(n,e)}},addPair:function(t){if(void 0!==t&&t.length>0){var e=o.value.length,a=o.selectionStart,n=o.selectionEnd,l=o.value.substring(a,n);if(l.length>0){var i="["+t+"]"+l+"[/"+t+"]";o.value=o.value.substring(0,a)+i+o.value.substring(n,e)}}},addTag:function(t,e){if(void 0!==t&&t.length>0){var a=o.value.length,n=o.selectionStart,l=o.selectionEnd,i=o.value.substring(n,l);if(i.length>0){var g="["+t;void 0!==e&&e.length>0&&"string"==typeof e?g+="="+e+"]":g+="]",g+=i+"[/"+t+"]",o.value=o.value.substring(0,n)+g+o.value.substring(l,a)}}},insertTag:function(t,e){var a=o.value.length,n=o.selectionStart;if(void 0!==t&&t.length>0&&void 0!==e&&e.length>0){var l="["+t;"object"==typeof e?void 0!==e[0]&&e[0].length>0&&"string"==typeof e[0]&&void 0!==e[1]&&e[1].length>0&&"string"==typeof e[1]?l+="="+e[0]+"]"+e[1]:void 0!==e[0]&&e[0].length>0&&"string"==typeof e[0]&&(l+="]"+e[0]):"string"==typeof e&&(l+="]"+e),l+="[/"+t+"]",o.value=o.value.substring(0,n)+l+o.value.substring(n,a)}}};return i(n.format,".bg-ubb-format","format"),i(n.heading,".bg-ubb-heading","heading"),i(n.color,".bg-ubb-color","color"),i(n.bgcolor,".bg-ubb-bgcolor","bgcolor"),i(n.dialog,".bg-ubb-dialog","dialog"),i(n.single,".bg-ubb-single","single"),a.keyup(function(t){13==t.keyCode&&g.addSingle("br")}),t(n.menu_selector).on("click",".bg-pair",function(){var e=t(this).data("tag");g.addPair(e)}),t(n.menu_selector).on("click",".bg-single",function(){var e=t(this).data("tag");g.addSingle(e)}),t(n.menu_selector).on("click",".bg-tag",function(){var e=t(this).data("tag"),a=t(this).data("value");g.addTag(e,a)}),t(n.menu_selector).on("click",".bg-dialog",function(){var e=t(this).data("tag"),a=e;void 0!==n.dialog[e]&&("string"==typeof n.dialog[e]?a=n.dialog[e]:"object"==typeof n.dialog[e]&&(void 0!==n.dialog[e].ext?a=n.dialog[e].ext:void 0!==n.dialog[e].text&&(a=n.dialog[e].text))),t.baigoDialog().input(a,function(t,a){void 0!==t&&"ok"==t&&g.insertTag(e,a)})}),"string"==typeof e&&void 0!==g[e]&&g[e].apply(this,Array.prototype.slice.call(arguments,1)),g}}(jQuery);